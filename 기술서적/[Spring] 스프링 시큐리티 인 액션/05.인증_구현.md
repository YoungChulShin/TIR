# 인증 구현
## AuthenticationProvider의 이해
한 애플리케이션에서 여러 인증 방식을 구현해야 할 수 있다. 스프링 시큐리티에서 `AuthenticationProvider`를 이용해서 맞춤형 인증 논리를 제공한다. 

### 인증 프로세스 중 요청 나타내기
Authentication 인터페이스
- 인증 요청 이벤트를 나타내며, 애플리케이션에 접근을 요청한 엔티티의 세부 정보를 담는다
- 애플리케이션의 접근을 요청하는 사용자를 주체(Principal)라고 한다
- Authentication은 Principal을 확장한다
- 계약의 주체만 나타내는게 아니라 인증 완료 여부, 권한 등의 정보를 추가로 가진다

![5-3](/Images/스프링시큐티리인액션/5-3.jpg)

### 맞춤 인증 논리 구현
AuthenticationProvider
- 인증 논리를 처리한다
- 사용자를 찾는 책임은 'UserDetailsService'에 위임한다
- 암호 관리는 'PasswordEncoder'에 위임한다

`authenticate` 메서드
- 인증이 실패하면 'AuthenticationException'을 throw한다
- 인증을 처리할 수 없으면 null을 리턴한다
- 인증이 완료되면 'isAuthentcated'를 true로 설정한다.

`support` 메서드
- Authentication 객체로 제공된 형식을 처리할 수 있는지 여부를 설정한다
- 여기서 true를 응답해도, authenticate() 메서드에서 null을 리턴해서 요청을 거부할 수 있다
- ![5-4](/Images/스프링시큐티리인액션/5-4.jpg)

CustomAuthenticationProvider 구현 샘플
- https://github.com/YoungChulShin/book-spring-security-in-action/tree/master/ch5-ex1


