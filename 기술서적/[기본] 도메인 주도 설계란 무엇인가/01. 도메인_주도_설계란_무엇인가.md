# 1장 도메인 주도 설계란 무엇인가?
소프트웨어는 현실 세계의 프로세스를 자동화하거나 비지니스 문제를 해결하기 위해서 개발된다. 자동화된 비지니스 프로세스나 현실 세계의 문제가 소프트웨어의 도메인이다. 
- 우리가 소프트웨어를 코드로 개발하기 때문에 코드 자체에 너무 많은 시간을 보내거나, 소프트웨어를 단순한 오브젝트와 메서드의 관점에서 보기도 한다. 

좋은 소프트웨어를 만들기 위해서는 그 소프트웨어가 무엇에 관련된 것인지를 알아야한다. 

은행 소프트웨어를 만든다고 생각해보자
- 은행 업무의 모든 것을 알고 그 도메인을 이해하는 사람이 아니면 좋은 은행 소프트웨어를 만들 수 없다. 즉, 도메인에 대한 깊은 지식 없이는 복잡한 은행 소프트웨어를 만드는 것은 불가능하다.
- 그럼 은행 업무의 전문가는 누구인가? 은행원이다. 
   - 그들이 은행 업무를 제일 잘 알고, 
   - 세밀한 내용, 애로사항, 가능한 이슈 및 모든 규칙을 잘 알고 있다. 

```
나 역시 MES 개발을 할 때 비슷했던 것 같다. 그때는 DDD 같은것은 잘 몰랐다. 
신입이 오면 먼저 했던게 공장을 데려가서 실제로 어떻게 일하는지 계속 보여줬고, 
신규 제조 시스템을 개발할 때는 항상 공장에서 현장 작업자, 매니저 & 각 부서 사람들과 인터뷰하고 현장에서 어떻게 일하는지를 파악하고 나서야 어떤 부분을 개선하고 개발을 어떻게 할지에 대한 감지 많이 왔다. 

지금 회사에 면접볼 때도 이 부분에 대해서 질문이 있었는데, 현실과는 조금 달랐다. 
```

```
우리의 도메인 전문가는 누구일까?
조직장, PO는 아닌것 같고, 
기사, 지점이 있지만 만나기가 어렵고, 
LM이 제일 맞을까? 
그럼 VOC가 결국 우리 도메인의 완성도를 더 높여주는 작업이 맞을까?
```

우리가 출발해야할 곳은 코드가 아니라 언제나 도메인이다.
- __결국 소프트웨어를 만드는 것은 특정 도메인의 일이 더 잘 굴러가도록 하는데 있기 때문이다.__

그럼 도메인과 조화를 이루는 소프트웨어는 어떻게 만들 수 있을까?
- 소프트웨어는 도메인의 핵심 개념과 각 구성요소를 담고 있어야하고, 그들 간의 관계를 정확하게 실체화해야한다. 
- 이를 바탕으로 소프트웨어는 도메인을 모델링해야한다
- __해당 도메인을 모르는 사람도 도메인 모델로 작성된 코드를 읽었을 떼 도메인에 대해서 많은 것을 배울 수 있어야한다.__
   ```
   우리 코드는 지금 이렇게 되어 있을까?
   라스트마일 도메인이 복잡한걸까? 도메인을 구현한 우리의 코드가 복잡한걸까?
   ```

그럼 도메인이란 무엇인가?
- 하나의 도메인은 세상의 어떤것이다
- >넓은 의미에서 도메인이란 한 조직이 행하는 일과 그 조직 안의 세계를 일컫는다. 비지니스 담당자는 시장을 파악하고 상품과 서비스를 판매한다. 각기 다른 종류의 조직은 그 나름대로 독특한 노하우를 가진 영역과 업무를 수행하는 방법이 있다. 그 이해의 영역과 조직의 작업을 수행하는 방법이 조직의 도메인이다. (ddd redbook)

그럼 도메인 모델이란 무엇인가?
- 우리는 전문가와 이야기를 나누면서 도메인에 대해 많은 것을 배울 수 있는데, 이러한 가공하지 않은 지식은 추상화된 형태로 바꾸지 않고서는 소프트웨어 구축에 사용하기가 어렵다. 
- 추상화를 표현한 것이 도메인 모델이다. 도메인 모델은 도메인 지식에서 선택적으로 추상화하여 엄격하게 조직화한 것이다. 
   - _선택적이라고 한 것은 모든것을 다 조직화할 필요는 없기 때문이지 않을까 생각이 된다_
- 우리는 정보를 조직화하고, 체계화하고, 이것을 작은 부분으로 나누고, 그 조각들을 다시 논리적 모듈로 그룹화 한 다음에 한번에 하나씩 선택해서 나누어야한다. 
   - 이 과정에서 필요 없는 부분은 제외하기도 한다
   - 이러한 작업 자체가 설계의 한 부분이고 개발 프로세스이다. 
   - _이 과정에 도메인을 나누고 바운디드 컨텍스트를 정의하고 애그리거트를 그룹핑하는 과정이 아닐까?_

의사 소통
- 우리는 홀로 일하는 것이 아니므로 (도메인이 전문과, 설계자, 개발자 등과) 의사 소통 및 지식과 정보를 공유해야하고, 이 과정에서 어떠한 모호함도 없이 정확하고 완전하게 지식과 정보를 공유해야한다. 
- 정보를 공유하는 방식
   1. 다이어그램, 유스케이스, 그림, 사진 같은 시각적 도구를 활용하는 방법
   2. 글로 적는 것
   3. 언어 (우리는 도메인의 특정 이슈를 서로 알리고 나눌 언어를 만들 수 있으며, 또한 만들어내야만 한다)
   ```
   각자가 활용하는 방법에 대해서 이야기해보자. 
   나는 1번을 주로 활용하지만 적극적으로 공유를 하지는 않는다. 
   2번은 개발자 문서 정도로 관리되는 것 같고, 3번은 생각을 해보지도, 시도해본적도 없다. 

   그런데 우리는 누구와 어떻게 공유해야할까?
   누구와: PO? 개발에 참여하는 모든 이해 관계자? 
   어디서: 개발과 관련된 슬랙 채널?

   개발이 끝났을 때 도메인 지식은 어떻게 관리될 수 있을까?
   예전에는 PO 분들이 기획 문서를 굉장히 잘 써줬는데, 요즘은 그런 추세는 아닌것 같다. 
   예치금 자동결제 기획 문서: https://wiki.mm.meshkorea.net/pages/viewpage.action?pageId=70517070
   ```

소프트웨어 설계
- 폭포수 (waterfall)
   - 전통적인(?) 개발 방식
   - 지식이 한방향으로 흐른다
   - 피드백이 전무한 단점이 있다. 프로젝트 완료 시점에 요구사항이 변경되거나 내가 원한 것과 다른 개발이 나올 수도 있다. 
- 익스트림 프로그래밍(XP)
   - 애자일, 페어프로그래밍
   - 요구사항은 언제든지 변경될 수 있다는 가정을 깔고 시작한다. 
      - _우리는 애자일하게 일하고 있을까? LM 처음부터 완벽한 요구사항을 제시할 수 없다고 가정을 해야할까?_
   - 지속적인 반복을 통해서 완성된 소프트웨어를 개발해간다. 이 과정에서 도메인 모델을 완벽하게 만들어간다. 
      - p.18 `초기 단계의 청사진은 늘 불완전하다. 그러나 일을 계속 진행하다 보면 점점 발전하고 더욱 명확해진다`

## 도메인 지식 쌓기
항공 교통 관제 시스템
- https://drive.google.com/file/d/1j7v1FvvNHxyP9jyAK0FkurymoDa6qfbP/view?usp=sharing

무엇을했는가?
- 도메인 전문가들은 이야기를 하고 있고, 서로 지식을 교환하고 있다
- 우리는 질문을 하기 시작하고, 그들은 대답한다
- 이 과정에서 도메인의 필수 개념이 도출된다. 
- 이 과정에서 만들어지는 정보는 세련되거나 조직화되지 못한 형태일 수 있지만, 도메인을 이해하는데 필수적이고, 필수 개념을 도출할 수 있다. 

우리가 개발을 할 때에도 우리(소프트웨어 아키텍트, 개발자)와 도메인 전문가는 도메인 모델을 함께 만들어낸다. 
- 의사 소통은 한방향으로 흐르는게 아니라 질문과 대화를 통해서 명확하게 만들어야한다
- 모델은 두 전문 영역이 만나는 장소가 된다
- 이 과정이 시간이 많이 소모될 수도 있지만 반드시 해야한다. __결국 소프트웨어의 목적은 현실 세계의 도메인 안에 있는 비지니스 문제를 해결하기 위한 것이기 때문이다.__

```
코드에 집중해서 어떻게 개발하는것도 중요하지만, 결국 우리가 왜 개발을 해야하는지를 잊지 않는것이 중요한것 같다. 
우리는 개발을 통해서 어떤 문제를 해결해야한다. 이게 진짜 중요한것같다. 

지금의 내 조직은 각각의 역할을 누가 담당하고 있을까?
- 개발자: 개발 조직
- 도메인 전문가: LM 운영실?
- PO: 중간 관계

우리 개발은 PO라는 직책이 있다. PO는 (적어도 내 생각에는) 도메인 전문가인 사람도 있고 아닌 사람도 있는것 같다. 도메인 전문가가 아니라면 도메인 전문가와 개발자 사이에서 함께 어떻게 문제를 풀어갈지 정리하고 정책을 정하고 방향을 잡아주는 역할이 아닐까 생각이 된다. 

프로젝트에 따라서 우리는 PO에게 질문할 수도 있고, 도메인 전문가에게 질문을 할 수도 있다. 
확실한것은 질문을 통해서 도메인에서 풀고자 하는 문제를 구체화해야한다. 

전술적 패턴/전략적 패턴


```