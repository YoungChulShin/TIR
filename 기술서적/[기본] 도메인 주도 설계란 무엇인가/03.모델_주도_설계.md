# 03. 모델 주도 설계
## 리파지토리(Repository)
```
집합이 실제 값의 집합과 Aggregate로 같이 사용되니 헷갈린다. 여기는 집합, 애그리거트로 구분해서 적어본다. 
클라이언트는 엔티티를 사용하는 클라이언트(application service, domain service)로 생각했다. 설명 내용을 보면 domain service가 좀 더 맞는듯 하다. 
```
Factory가 객체의 생성을 책임진다면, 이미 생성된 체를 참조할 때는 어떻게 해야할까?
- 얘를 들어서 애그리거트의 값 객체를 얻기 위해서는 root의 참조를 얻어야하는데 어떻게 해야할까?
- 항상 메모리에 객체를 보관할 수는 없다. 

데이터베이스 또는 다른 영속적인 형태로 저장된 값을 조회함으로써 얻을 수 있다. 
- 객체가 집합의 root라면 엔티티
- 값 객체라면 엔티티로부터 그 값을 얻을 수 있다.

하지만 클라이언트에서 이 값을 직접 조회하는 것은 문제가 있을 수 있다. 
- 제일 빠르고 간단한 해결책처럼 보이기는 하지만, 설계에는 좋지 않다. 
- 이렇게 되면 도메인 레이어에 DB 관련 코드가 산재하게 된다. 도메인 모델도 도메인의 개념 자체보다는 인프라스트럭처 관련된 부분을 다루게 된다. 
   - 특정 기술에 얽매이게 된다. DB를 변경한다면 어떻게 될까?
- 