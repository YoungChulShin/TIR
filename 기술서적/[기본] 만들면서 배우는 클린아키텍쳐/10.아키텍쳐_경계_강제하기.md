# 10 아키텍쳐 경계 강제하기
일정 규모 이상의 모든 프로젝트는 시간이 지나면서 아키텍쳐가 서서히 무너지게 된다. 계층간의 경계가 약화되고, 코드는 점점 더 테스트하기 어려워지고, 새로운 기능을 구현하려는데 점점 더 많은 시간이 든다. 

## 경계와 의존성
![10-1](/Images/만들면서배우는클린아키텍쳐/10-1.jpg)

## 접근 제한자
package-private을 잘 이용하면 응집된 모듈을 만드는데 도움을 받을 수 있다

![10-2](/Images/만들면서배우는클린아키텍쳐/10-2.jpg)
hexogonal architecture에서는 아래와 같다
- web adapter(controller): public
- in port(use case): public 
- service: package-private (interface를 구현하면 되기 때문에)
- domain: public
- out port: public
- persistence adapter: package-private

## 빌드 아티팩트
한개의 빌드 프로젝트라면 접근 제한자 등을 이용해서 경계를 설정할 수 있지만, 빌드 아티팩트를 여러개로 나누어서 경계를 설정하는 것도 하나의 방법이다. 

모듈을 더 세분화할수록 모듈 간 의존성을 더 잘 제어할 수 있지만, 더 작게 분리할수록 모듈간 매핑을 더 많이 수행해야한다. 

![10-3](/Images/만들면서배우는클린아키텍쳐/10-3.jpg)

## 유지보수 가능한 소프트웨어를 만들 때 어떻게 도움이 될까?
기본적으로 소프트웨어 아키텍처는 아키텍처 요소 간의 의존성을 관리하는 게 전부다. 만약 의존성이 거대한 진흙 덩어리가 된다면 아키텍처 역시 거대한 진흙 덩어리가 된다. 

아키텍처 잘 유지하고 싶으면 의존성이 올바른 방향을 가리키고 있는지 지속적으로 확인해야 한다. 

새로운 코드를 추가하거나 리팩토링할 때 패키지 구조를 항상 염두에 둬야하고, 가능한 package-private 가시성을 이용해 패키지 바깥에서 접근하면 안 되는 클래스에 대한 의존성을 피해야한다. 