애플리케이션 역할
- 도메인 모델의 개념을 보여주는 사용자 인터페이스가 있고, 그 모델상에 사용자가 다양한 행동을 수행하도록 해줄 수 있다
- 사용자 인터페이스는 유스케이스 태스크를 조정하고 트랜잭션을 관리하며 필요한 보안 권한의 부여를 담당하는 애플리케이션 단계의 서비스를 활용한다

## 사용자 인터페이스
3가지 카테고리
1. 순수한 요청-응답 웹 사용자 인터페이스
   - Struts, 스프링 MVC, ASP.NET
2. 웹 기반의 RIA, Rich Internet Application
   - DTHML, Ajax를 포함하여 웹 2.0으로 알려져있다
3. 추상화 라이브러리를 사용하는 네이티브 클라이언트 GUI

### 도메인 객체의 렌더링
특징
- 사용자 인터페이스는 종종 다수의 애그리게잇 인스턴스의 속성을 렌더링할 필요가 있다
- 한번에 단 하나의 인스턴스를 수정하도록 요청한다

### 애그리게잇 인스턴스로부터 데이터 전송 객체를 덴러딩하기
특징
- 다수의 애그리게잇 인스턴스를 단일 뷰로 렌더링하는 문제를 해결하는 인기 있는 방법으로 DTO가 있다
- 애그리게잇은 DTO 어셈블러가 필요한 데이터를 쿼리할 수 있도록 설계돼야 한다
- 클라이언트가 애그리게잇 내부의 어떤 파트와도 결합되지 않도록 해야 한다

### 애그리게잇 내부 상태를 발행하기 위해 중재자를 사용하자
특징
- 모델과 클라이언트 사이의 촘촘한 결합으로 인해 발생하는 문제를 피하기 위해 중재자 인터페이스를 설계해 애그리게이싱 내부 상태를 발행하도록 할 수 있다
- 클라이언트는 중재자 인터페이스를 구현해 구현자의 객체 참조를 메소드 인수로서 애그리게잇에 전달한다

### 도메인 페이로드 객체로부터 애그리게잇 인스턴스를 렌더링하라
특징
- DPO(Domain Payload Object): 렌더링을 위한 다수의 전체 애그리게잇 인스턴스를 모아서 단일 도메인 페이로드 객체로 변환
- DTO에 비해서는 단일 가상 머신 애플리케이션 아키텍처의 장점을 갖는다
- 논리적 계층 간에 데이터 클러스터를 이동할 수 있도록 객체의 설계를 단순화하는 이점이 있다.
   - DPO는 설계하기가 훨씬 쉽고 메모리 발자국이 작다
- 지연로딩된 객체를 가져오기 않기 때문에 지연 로딩 객체를 참조할 때 예외가 발생할 수 있다

### 유스케이스 최적 리파지토리 쿼리
특징
- 하나 이상의 애그리게잇 인스턴스의 상위 집합인 사용지 지정 객체를 구성해줄 탐색자 쿼리 메소드를 리파지토리에 설계하는 것

### 다수의 개별 클라이언트 처리하기
특징
- 애플리케이션 서비스가 데이터 변환기를 수용하도록 설꼐하면서, 각 클라이언트에선 데이터 변환기 타입을 구체적으로 지정하는 방식
- 예: CalendarWeekDataTransformer가 있을 때, 이에 대한 구현은 아래와 같을 수 있다
   - CalendarWeekCSVDaaTransformer, CalendarWeekDPODataTransformer

### 변환 어댑터와 사용자 편집의 처리
특징
- 어떤 방법으로든 도메인 데이터는 애플리케이션 서비스로부터 DTO나 DPO, 상태 표현 등의 형태로 제공되며, 어떤 프레젠테이션 프레임워크를 사용하든 프레젠테이션 모델의 장점을 활용할 수 있다
- 뷰 렌더링 방법
   1. 뷰 스스로가 프레젠테이션 모델에 기반해 렌더링된다
   2. 프레젠테이션 모델에 의해 뷰가 렌더링된다
   - 프레젠테이션 모델은 어댑터 역할을 한다. 뷰의 필요에 따라 설계된 속성과 행동을 제공함으로써 도메인 모델의 세부사항을 감추게 된다
- 또 하나의 장점은 자바빈 인터페이스의 게터를 지원하지 않는 애그리게잇을 게터를 필요로 하는 사용자 인터페이스 프레임워크에 적용할 수 있다는 점이다
- 프레젠테이션 모델은 애플리케이션 서비스나 도메인 모델 주변에서 너무 무거운 짐을 지고 있는 파사드가 아니라는 점이다
- 프레젠테이션 모델 클래스가 애플리케이션 서비스의 세부적인 사용을 권리하는 코드를 포함하거나, 또는 도메인애플리케이션 서비스인마냥 행동해서는 안된다. 이는 프레젠테이션 모델의 책임을 훨씬 넘어서는 것이다.

## 애플리케이션 서비스
특징
- 애플리케이션 서비스는 도메인 모델의 직접적인 클라이언트다
- ACID DB를 사용할 때 모델 상태 변환이 원자적으로 영속되도록 트랜잭션도 함께 제어한다
- 보안도 관리한다
- 애플리케이션은 도메인모델과는 다르다.
   - 비지니스 도메인 로직은 도메인 모델안에 넣으려고 노력해야 한다
   - 애플리케이션 서비스를 얇게 유지하면서 오직 모델로 향하는 태스크 조율에만 사용하도록 하자

### 애플리케이션 서비스 예제
특징
- 때로 애플리케이션 서비시는 사용자 인터페이스가 이런 도메인 지식으로부터 완전히 보호되도록 설계되기도 한다. 
- 이렇게 함으로써 애플리케이션 서비스 메소드의 서명은 오직 원시 타입과 String와 DTO만을 사용하게 된다
   - 모델에서 타입을 제거하면서 의존성과 커플링을 피할 수는 있지만, 값 객체 타입으로부터 거져 얻을 수 있는 강력한 타입 검증과 값의 기본적 유효성 겂사를 포기해야 한당
- 커맨드 접근법이 또 다른 대안이 될 수도 있다

예제- provisionTenant()의 구현
- 도메인 서비스로 위힘하는 코드가 있다
   - 중요로직은 도메인 서비스에 있고, 애플레케이션 서비스에는 거의 없다
- 기능
   1. 새로운 Tenant 애그리게잇을 인스턴스화 하고 이를 리포지토리에 추가한다
   2. 새로운 Tenant에 관리자를 할당한다
   3. TenantProvisioned 이벤트를 발행한다
- 애플레케이션 서비스가 1단계를 넘어선 일을 한다면 모델로부터 도메인 로직이 심각하게 새어 나가게 된다

## 여러 바운디드 컨텍스트 묶기
특징
- 사용자 인터페이스는 어려 모델이 묶여 구성된다는 사실을 알아선 안된다
- 방법
   1. 애플리케이션 계층이 유스케이스를 관리하므로, 모델 컴포지션의 실질적 근원으로서 애플리케이션 계층을 하나 만드는 편이 가장 편리할 수 있다
      - 사용자 인터페이스 계층 -> 에플리케이션 계층 -> 제품 도메인 계층, 토론 도메인 계층, 리뷰 도메인 계층 
   2. 하나의 바운디드 컨텍스트 안에서 통합된 객체 모델으로서의 도메인 모델을 정하는 방식도 있다

## 인프라
역할
- 애플레키여션의 다른 부분들로부터 기술적인 기능을 제공하는 일
- 의존성 역행 원리의 사고 방식을 고수하는 편이 도움이 된다

특징
- 애플리케이션 서비스가 리포지토리를 조회하면, 이는 오직 도메인 모델의 인터페이스에만 의존적이며 인프라의 구현을 사용하게 된다
- 저장소를 다루는 일은 모델의 책임이 아니기 때문에 리포지토리의 구현은 인프라 내부로 한정된다
